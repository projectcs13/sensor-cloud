(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)};b.widget=function(g,j,h){var m,l,f,k,i=g.split(".")[0];g=g.split(".")[1];m=i+"-"+g;if(!h){h=j;j=b.Widget}b.expr[":"][m.toLowerCase()]=function(n){return !!b.data(n,m)};b[i]=b[i]||{};l=b[i][g];f=b[i][g]=function(o,n){if(!this._createWidget){return new f(o,n)}if(arguments.length){this._createWidget(o,n)}};b.extend(f,l,{version:h.version,_proto:b.extend({},h),_childConstructors:[]});k=new j();k.options=b.widget.extend({},k.options);b.each(h,function(o,n){if(b.isFunction(n)){h[o]=(function(){var q=function(){return j.prototype[o].apply(this,arguments)},p=function(r){return j.prototype[o].apply(this,r)};return function(){var t=this._super,s=this._superApply,r;this._super=q;this._superApply=p;r=n.apply(this,arguments);this._super=t;this._superApply=s;return r}})()}});f.prototype=b.widget.extend(k,{widgetEventPrefix:g},h,{constructor:f,namespace:i,widgetName:g,widgetBaseClass:m,widgetFullName:m});if(l){b.each(l._childConstructors,function(n,p){var o=p.prototype;b.widget(o.namespace+"."+o.widgetName,f,p._proto)});delete l._childConstructors}else{j._childConstructors.push(f)}b.widget.bridge(g,f)};b.widget.extend=function(k){var f=d.call(arguments,1),j=0,h=f.length,g,i;for(;j<h;j++){for(g in f[j]){i=f[j][g];if(f[j].hasOwnProperty(g)&&i!==e){k[g]=b.isPlainObject(i)?b.widget.extend({},k[g],i):i}}}return k};b.widget.bridge=function(f,g){var h=g.prototype.widgetFullName;b.fn[f]=function(l){var i=typeof l==="string",k=d.call(arguments,1),j=this;l=!i&&k.length?b.widget.extend.apply(null,[l].concat(k)):l;if(i){this.each(function(){var n,m=b.data(this,h);if(!m){return b.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+l+"'")}if(!b.isFunction(m[l])||l.charAt(0)==="_"){return b.error("no such method '"+l+"' for "+f+" widget instance")}n=m[l].apply(m,k);if(n!==m&&n!==e){j=n&&n.jquery?j.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=b.data(this,h);if(m){m.option(l||{})._init()}else{new g(l,this)}})}return j}};b.Widget=function(g,f){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(g,f){f=b(f||this.defaultElement||this)[0];this.element=b(f);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),g);this.bindings=b();this.hoverable=b();this.focusable=b();if(f!==this){b.data(f,this.widgetName,this);b.data(f,this.widgetFullName,this);this._on({remove:"destroy"});this.document=b(f.style?f.ownerDocument:f.document||f);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var h=j,l,f,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j==="string"){h={};l=j.split(".");j=l.shift();if(l.length){f=h[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){f[l[g]]=f[l[g]]||{};f=f[l[g]]}j=l.pop();if(k===e){return f[j]===e?null:f[j]}f[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}h[j]=k}}this._setOptions(h);return this},_setOptions:function(g){var f;for(f in g){this._setOption(f,g[f])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(h,g){if(!g){g=h;h=this.element}else{h=b(h);this.bindings=this.bindings.add(h)}var f=this;b.each(g,function(n,m){function l(){if(f.options.disabled===true||b(this).hasClass("ui-state-disabled")){return}return(typeof m==="string"?f[m]:m).apply(f,arguments)}if(typeof m!=="string"){l.guid=m.guid=m.guid||l.guid||b.guid++}var k=n.match(/^(\w+)\s*(.*)$/),j=k[1]+f.eventNamespace,i=k[2];if(i){f.widget().delegate(i,j,l)}else{h.bind(j,l)}})},_off:function(g,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(i,g){function h(){return(typeof i==="string"?f[i]:i).apply(f,arguments)}var f=this;return setTimeout(h,g||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){b(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){b(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,g,h){var k,j,i=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];j=g.originalEvent;if(j){for(k in j){if(!(k in g)){g[k]=j[k]}}}this.element.trigger(g,h);return !(b.isFunction(i)&&i.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(g,f){b.Widget.prototype["_"+g]=function(i,j,k){if(typeof j==="string"){j={effect:j}}var l,h=!j?g:j===true||typeof j==="number"?f:j.effect||f;j=j||{};if(typeof j==="number"){j={duration:j}}l=!b.isEmptyObject(j);j.complete=k;if(j.delay){i.delay(j.delay)}if(l&&b.effects&&(b.effects.effect[h]||b.uiBackCompat!==false&&b.effects[h])){i[g](j)}else{if(h!==g&&i[h]){i[h](j.duration,j.easing,k)}else{i.queue(function(m){b(this)[g]();if(k){k.call(i[0])}m()})}}}});if(b.uiBackCompat!==false){b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(b){var a=0;b.ajaxTransport("iframe",function(d){if(d.async&&(d.type==="POST"||d.type==="GET")){var e,c;return{send:function(g,f){e=b('<form style="display:none;"></form>');e.attr("accept-charset",d.formAcceptCharset);c=b('<iframe src="javascript:false;" name="iframe-transport-'+(a+=1)+'"></iframe>').bind("load",function(){var h,i=b.isArray(d.paramName)?d.paramName:[d.paramName];c.unbind("load").bind("load",function(){var j;try{j=c.contents();if(!j.length||!j[0].firstChild){throw new Error()}}catch(k){j=undefined}f(200,"success",{iframe:j});b('<iframe src="javascript:false;"></iframe>').appendTo(e);e.remove()});e.prop("target",c.prop("name")).prop("action",d.url).prop("method",d.type);if(d.formData){b.each(d.formData,function(j,k){b('<input type="hidden"/>').prop("name",k.name).val(k.value).appendTo(e)})}if(d.fileInput&&d.fileInput.length&&d.type==="POST"){h=d.fileInput.clone();d.fileInput.after(function(j){return h[j]});if(d.paramName){d.fileInput.each(function(j){b(this).prop("name",i[j]||d.paramName)})}e.append(d.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")}e.submit();if(h&&h.length){d.fileInput.each(function(k,j){var l=b(h[k]);b(j).prop("name",l.prop("name"));l.replaceWith(j)})}});e.append(c).appendTo(document.body)},abort:function(){if(c){c.unbind("load").prop("src","javascript".concat(":false;"))}if(e){e.remove()}}}}});b.ajaxSetup({converters:{"iframe text":function(c){return b(c[0].body).text()},"iframe json":function(c){return b.parseJSON(b(c[0].body).text())},"iframe html":function(c){return b(c[0].body).html()},"iframe script":function(c){return b.globalEval(b(c[0].body).text())}}})}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a)}else{a(window.jQuery)}}(function(a){a.support.xhrFileUpload=!!(window.XMLHttpRequestUpload&&window.FileReader);a.support.xhrFormDataFileUpload=!!window.FormData;a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,formData:function(b){return b.serializeArray()},add:function(c,b){b.submit()},processData:false,contentType:false,cache:false},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+(new Date());this.loaded=0;this.bitrate=0;this.getBitrate=function(c,d,b){var e=c-this.timestamp;if(!this.bitrate||!b||e>b){this.bitrate=(d-this.loaded)*(1000/e)*8;this.loaded=d;this.timestamp=c}return this.bitrate}},_isXHRUpload:function(b){return !b.forceIframeTransport&&((!b.multipart&&a.support.xhrFileUpload)||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;if(typeof b.formData==="function"){return b.formData(b.form)}if(a.isArray(b.formData)){return b.formData}if(b.formData){c=[];a.each(b.formData,function(d,e){c.push({name:d,value:e})});return c}return[]},_getTotal:function(c){var b=0;a.each(c,function(d,e){b+=e.size||1});return b},_onProgress:function(g,f){if(g.lengthComputable){var b=+(new Date()),d,c;if(f._time&&f.progressInterval&&(b-f._time<f.progressInterval)&&g.loaded!==g.total){return}f._time=b;d=f.total||this._getTotal(f.files);c=parseInt(g.loaded/g.total*(f.chunkSize||d),10)+(f.uploadedBytes||0);this._loaded+=c-(f.loaded||f.uploadedBytes||0);f.lengthComputable=true;f.loaded=c;f.total=d;f.bitrate=f._bitrateTimer.getBitrate(b,c,f.bitrateInterval);this._trigger("progress",g,f);this._trigger("progressall",g,{lengthComputable:true,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(b,this._loaded,f.bitrateInterval)})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload){a(d.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;c._onProgress(f,b)});b.xhr=function(){return d}}},_initXHRData:function(c){var f,b=c.files[0],d=c.multipart||!a.support.xhrFileUpload,e=c.paramName[0];c.headers=c.headers||{};if(c.contentRange){c.headers["Content-Range"]=c.contentRange}if(!d){c.headers["X-File-Name"]=b.name;c.contentType=b.type;c.data=c.blob||b}else{if(a.support.xhrFormDataFileUpload){if(c.postMessage){f=this._getFormData(c);if(c.blob){f.push({name:e,value:c.blob})}else{a.each(c.files,function(g,h){f.push({name:c.paramName[g]||e,value:h})})}}else{if(c.formData instanceof FormData){f=c.formData}else{f=new FormData();a.each(this._getFormData(c),function(g,h){f.append(h.name,h.value)})}if(c.blob){c.headers["X-File-Name"]=b.name;c.headers["X-File-Type"]=b.type;f.append(e,c.blob,b.name)}else{a.each(c.files,function(g,h){if(h instanceof Blob){f.append(c.paramName[g]||e,h,h.name)}})}}c.data=f}}c.blob=null},_initIframeSettings:function(b){b.dataType="iframe "+(b.dataType||"");b.formData=this._getFormData(b);if(b.redirect&&a("<a></a>").prop("href",b.url).prop("host")!==location.host){b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})}},_initDataSettings:function(b){if(this._isXHRUpload(b)){if(!this._chunkedUpload(b,true)){if(!b.data){this._initXHRData(b)}this._initProgressListener(b)}if(b.postMessage){b.dataType="postmessage "+(b.dataType||"")}}else{this._initIframeSettings(b,"iframe")}},_getParamName:function(c){var b=a(c.fileInput),d=c.paramName;if(!d){d=[];b.each(function(){var e=a(this),f=e.prop("name")||"files[]",g=(e.prop("files")||[1]).length;while(g){d.push(f);g-=1}});if(!d.length){d=[b.prop("name")||"files[]"]}}else{if(!a.isArray(d)){d=[d]}}return d},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop("form"));if(!b.form.length){b.form=a(this.options.fileInput.prop("form"))}}b.paramName=this._getParamName(b);if(!b.url){b.url=b.form.prop("action")||location.href}b.type=(b.type||b.form.prop("method")||"").toUpperCase();if(b.type!=="POST"&&b.type!=="PUT"){b.type="POST"}if(!b.formAcceptCharset){b.formAcceptCharset=b.form.attr("accept-charset")}},_getAJAXSettings:function(c){var b=a.extend({},this.options,c);this._initFormSettings(b);this._initDataSettings(b);return b},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(c,e,d){var b=a.Deferred(),f=b.promise();e=e||this.options.context||f;if(c===true){b.resolveWith(e,d)}else{if(c===false){b.rejectWith(e,d)}}f.abort=b.promise;return this._enhancePromise(f)},_getUploadedBytes:function(d){var b=d.getResponseHeader("Range"),e=b&&b.split("-"),c=e&&e.length>1&&parseInt(e[1],10);return c&&c+1},_chunkedUpload:function(j,c){var g=this,d=j.files[0],f=d.size,b=j.uploadedBytes=j.uploadedBytes||0,e=j.maxChunkSize||f,l=d.slice||d.webkitSlice||d.mozSlice,m=a.Deferred(),i=m.promise(),k,h;if(!(this._isXHRUpload(j)&&l&&(b||e<f))||j.data){return false}if(c){return true}if(b>=f){d.error="Uploaded bytes exceed file size";return this._getXHRPromise(false,j.context,[null,"error",d.error])}h=function(n){var p=a.extend({},j);p.blob=l.call(d,b,b+e);p.chunkSize=p.blob.size;p.contentRange="bytes "+b+"-"+(b+p.chunkSize-1)+"/"+f;g._initXHRData(p);g._initProgressListener(p);k=(a.ajax(p)||g._getXHRPromise(false,p.context)).done(function(q,r,o){b=g._getUploadedBytes(o)||(b+p.chunkSize);if(!p.loaded){g._onProgress(a.Event("progress",{lengthComputable:true,loaded:b-p.uploadedBytes,total:b-p.uploadedBytes}),p)}j.uploadedBytes=p.uploadedBytes=b;if(b<f){h()}else{m.resolveWith(p.context,[q,r,o])}}).fail(function(o,r,q){m.rejectWith(p.context,[o,r,q])})};this._enhancePromise(i);i.abort=function(){return k.abort()};h();return i},_beforeSend:function(c,b){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer()}this._active+=1;this._loaded+=b.uploadedBytes||0;this._total+=this._getTotal(b.files)},_onDone:function(d,e,c,b){if(!this._isXHRUpload(b)){this._onProgress(a.Event("progress",{lengthComputable:true,loaded:1,total:1}),b)}b.result=d;b.textStatus=e;b.jqXHR=c;this._trigger("done",null,b)},_onFail:function(c,e,d,b){b.jqXHR=c;b.textStatus=e;b.errorThrown=d;this._trigger("fail",null,b);if(b.recalculateProgress){this._loaded-=b.loaded||b.uploadedBytes||0;this._total-=b.total||this._getTotal(b.files)}},_onAlways:function(c,e,b,d){this._active-=1;d.textStatus=e;if(b&&b.always){d.jqXHR=b;d.result=c}else{d.jqXHR=c;d.errorThrown=b}this._trigger("always",null,d);if(this._active===0){this._trigger("stop");this._loaded=this._total=0;this._bitrateTimer=null}},_onSend:function(i,g){var f=this,d,j,c,b=f._getAJAXSettings(g),h=function(k,e){f._sending+=1;b._bitrateTimer=new f._BitrateTimer();d=d||((k!==false&&f._trigger("send",i,b)!==false&&(f._chunkedUpload(b)||a.ajax(b)))||f._getXHRPromise(false,b.context,e)).done(function(m,n,l){f._onDone(m,n,l,b)}).fail(function(l,n,m){f._onFail(l,n,m,b)}).always(function(m,p,l){f._sending-=1;f._onAlways(m,p,l,b);if(b.limitConcurrentUploads&&b.limitConcurrentUploads>f._sending){var n=f._slots.shift(),o;while(n){o=n.state?n.state()==="pending":!n.isRejected();if(o){n.resolve();break}n=f._slots.shift()}}});return d};this._beforeSend(i,b);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){j=a.Deferred();this._slots.push(j);c=j.pipe(h)}else{c=(this._sequence=this._sequence.pipe(h,h))}c.abort=function(){var e=[undefined,"abort","abort"];if(!d){if(j){j.rejectWith(c,e)}return h(false,e)}return d.abort()};return this._enhancePromise(c)}return h()},_onAdd:function(j,f){var h=this,n=true,m=a.extend({},this.options,f),c=m.limitMultiFileUploads,g=this._getParamName(m),k,l,b,d;if(!(m.singleFileUploads||c)||!this._isXHRUpload(m)){b=[f.files];k=[g]}else{if(!m.singleFileUploads&&c){b=[];k=[];for(d=0;d<f.files.length;d+=c){b.push(f.files.slice(d,d+c));l=g.slice(d,d+c);if(!l.length){l=g}k.push(l)}}else{k=g}}f.originalFiles=f.files;a.each(b||f.files,function(i,e){var o=a.extend({},f);o.files=b?e:[e];o.paramName=k[i];o.submit=function(){o.jqXHR=this.jqXHR=(h._trigger("submit",j,this)!==false)&&h._onSend(j,this);return this.jqXHR};return(n=h._trigger("add",j,o))});return n},_replaceFileInput:function(b){var c=b.clone(true);a("<form></form>").append(c)[0].reset();b.after(c).detach();a.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(d,e){if(e===b[0]){return c[0]}return e});if(b[0]===this.element[0]){this.element=c}},_handleFileTreeEntry:function(f,g){var e=this,b=a.Deferred(),c=function(h){if(h&&!h.entry){h.entry=f}b.resolve([h])},d;g=g||"";if(f.isFile){if(f._file){f._file.relativePath=g;b.resolve(f._file)}else{f.file(function(h){h.relativePath=g;b.resolve(h)},c)}}else{if(f.isDirectory){d=f.createReader();d.readEntries(function(h){e._handleFileTreeEntries(h,g+f.name+"/").done(function(i){b.resolve(i)}).fail(c)},c)}else{b.resolve([])}}return b.promise()},_handleFileTreeEntries:function(c,d){var b=this;return a.when.apply(a,a.map(c,function(e){return b._handleFileTreeEntry(e,d)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;if(c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)){return this._handleFileTreeEntries(a.map(c,function(e){var d;if(e.webkitGetAsEntry){d=e.webkitGetAsEntry();if(d){d._file=e.getAsFile()}return d}return e.getAsEntry()}))}return a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var e=b.prop("webkitEntries")||b.prop("entries"),c,d;if(e&&e.length){return this._handleFileTreeEntries(e)}c=a.makeArray(b.prop("files"));if(!c.length){d=b.prop("value");if(!d){return a.Deferred().resolve([]).promise()}c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){if(!(b instanceof a)||b.length===1){return this._getSingleFileInputFiles(b)}return a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(d){var b=this,c={fileInput:a(d.target),form:a(d.target.form)};this._getFileInputFiles(c.fileInput).always(function(e){c.files=e;if(b.options.replaceFileInput){b._replaceFileInput(c.fileInput)}if(b._trigger("change",d,c)!==false){b._onAdd(d,c)}})},_onPaste:function(f){var d=f.originalEvent.clipboardData,b=(d&&d.items)||[],c={files:[]};a.each(b,function(e,h){var g=h.getAsFile&&h.getAsFile();if(g){c.files.push(g)}});if(this._trigger("paste",f,c)===false||this._onAdd(f,c)===false){return false}},_onDrop:function(f){f.preventDefault();var c=this,b=f.dataTransfer=f.originalEvent.dataTransfer,d={};this._getDroppedFiles(b).always(function(e){d.files=e;if(c._trigger("drop",f,d)!==false){c._onAdd(f,d)}})},_onDragOver:function(c){var b=c.dataTransfer=c.originalEvent.dataTransfer;if(this._trigger("dragover",c)===false){return false}if(b){b.dropEffect="copy"}c.preventDefault()},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(b,d){var c=a.inArray(b,this._refreshOptionsList)!==-1;if(c){this._destroyEventHandlers()}this._super(b,d);if(c){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(b.fileInput instanceof a)){b.fileInput=a(b.fileInput)}}if(!(b.dropZone instanceof a)){b.dropZone=a(b.dropZone)}if(!(b.pasteZone instanceof a)){b.pasteZone=a(b.pasteZone)}},_create:function(){var b=this.options;a.extend(b,a(this.element[0].cloneNode(false)).data());this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(c){var b=this;if(!c||this.options.disabled){return}if(c.fileInput&&!c.files){this._getFileInputFiles(c.fileInput).always(function(d){c.files=d;b._onAdd(null,c)})}else{c.files=a.makeArray(c.files);this._onAdd(null,c)}},send:function(f){if(f&&!this.options.disabled){if(f.fileInput&&!f.files){var e=this,c=a.Deferred(),g=c.promise(),d,b;g.abort=function(){b=true;if(d){return d.abort()}c.reject(null,"abort","abort");return g};this._getFileInputFiles(f.fileInput).always(function(h){if(b){return}f.files=h;d=e._onSend(null,f).then(function(j,k,i){c.resolve(j,k,i)},function(i,k,j){c.reject(i,k,j)})});return this._enhancePromise(g)}f.files=a.makeArray(f.files);if(f.files.length){return this._onSend(null,f)}}return this._getXHRPromise(false,f&&f.context)}})}));